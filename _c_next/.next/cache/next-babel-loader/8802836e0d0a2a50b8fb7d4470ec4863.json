{"ast":null,"code":"var _jsxFileName = \"E:\\\\MONEYweb\\\\JOB\\\\4_myActivity\\\\0_REPO\\\\3_React_Practise\\\\c_next\\\\pages\\\\post\\\\[template].js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useRouter } from 'next/router';\nimport Link from 'next/link';\nimport { MainLayout } from '../../layouts/MainLayout';\nimport { useState, useEffect } from 'react';\nexport default function Post({\n  post: serverPost\n}) {\n  const router = useRouter(); // console.log('router: ', router);\n\n  const {\n    0: post,\n    1: setPost\n  } = useState(serverPost);\n  useEffect(() => {\n    if (!serverPost) {\n      async () => {\n        const response = await fetch(`http://localhost:4200/posts/${post.template}`);\n        const data = await response.json();\n        setPost(data);\n      };\n    }\n  }, []);\n\n  if (!post) {\n    return __jsx(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 16\n      }\n    }, \"Loading...\");\n  }\n\n  return __jsx(MainLayout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 8\n    }\n  }, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 13\n    }\n  }, post.title, \" \"), __jsx(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 13\n    }\n  }), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 13\n    }\n  }, post.body), __jsx(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 13\n    }\n  }, \"Go back to \", __jsx(Link, {\n    href: \"/posts\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 28\n    }\n  }, \" POSTS\")));\n}\n\nPost.getInitialProps = async ctx => {\n  if (!ctx.req) return {\n    post: null\n  };\n  const response = await fetch(`http://localhost:4200/posts/${ctx.query.template}`);\n  const post = await response.json();\n  return {\n    post\n  };\n}; // <h1><Link href={'/'}>Post router.query.template = </Link>{router.query.template}</h1>\n// router: ServerRouter {\n//     route: '/post/[template]',\n//     pathname: '/post/[template]',\n//     query: {},\n//     asPath: '/post/[template]',\n//     basePath: '',\n//     events: undefined,\n//     isFallback: false\n// }\n// ответ клиенту(WebDevTools) router: {\n//     pathname: \"/post/[template]\",\n//     route: \"/post/[template]\",\n//     query: {\n//         …},\n//     asPath: \"/post/id\",\n//     components: {\n//         …},\n//     …\n// }\n// asPath: \"/post/id\" // !!! из адресной строки, где отрисована страница...Зачем возвращать мне набранный адрес?\n// back: ƒ()\n// basePath: \"\"\n// beforePopState: ƒ()\n// components: {\n//         /post/ [template]: {\n//             …},\n//         /_app: {…}}\n//         events: {\n//             on: ƒ,\n//             off: ƒ,\n//             emit: ƒ\n//         }\n//         isFallback: false\n//         pathname: \"/post/[template]\"\n//         prefetch: ƒ()\n//         push: ƒ()\n//         query: {\n//             template: \"id\"\n//         } // ключ - название файла !\n//         reload: ƒ()\n//         replace: ƒ()\n//         route: \"/post/[template]\"\n//         __proto__: Object","map":{"version":3,"sources":["E:/MONEYweb/JOB/4_myActivity/0_REPO/3_React_Practise/c_next/pages/post/[template].js"],"names":["useRouter","Link","MainLayout","useState","useEffect","Post","post","serverPost","router","setPost","response","fetch","template","data","json","title","body","getInitialProps","ctx","req","query"],"mappings":";;;AAAA,SAAQA,SAAR,QAAwB,aAAxB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AAEA,SAAQC,UAAR,QAAyB,0BAAzB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AAEA,eAAe,SAASC,IAAT,CAAc;AAACC,EAAAA,IAAI,EAAEC;AAAP,CAAd,EAAkC;AAC7C,QAAMC,MAAM,GAAGR,SAAS,EAAxB,CAD6C,CAE7C;;AACA,QAAM;AAAA,OAACM,IAAD;AAAA,OAAOG;AAAP,MAAkBN,QAAQ,CAACI,UAAD,CAAhC;AAEAH,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAI,CAACG,UAAL,EAAiB;AACb,kBAAY;AACR,cAAMG,QAAQ,GAAG,MAAMC,KAAK,CAAE,+BAA8BL,IAAI,CAACM,QAAS,EAA9C,CAA5B;AACA,cAAMC,IAAI,GAAG,MAAMH,QAAQ,CAACI,IAAT,EAAnB;AACAL,QAAAA,OAAO,CAACI,IAAD,CAAP;AACH,OAJD;AAKH;AACJ,GARQ,EAQN,EARM,CAAT;;AAWA,MAAI,CAACP,IAAL,EAAW;AACP,WAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAP;AACH;;AACD,SACG,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKA,IAAI,CAACS,KAAV,MADL,EAEK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFL,EAGK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIT,IAAI,CAACU,IAAT,CAHL,EAIK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAe,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC,QAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAf,CAJL,CADH;AAQH;;AAEDX,IAAI,CAACY,eAAL,GAAuB,MAAOC,GAAP,IAAe;AAClC,MAAI,CAACA,GAAG,CAACC,GAAT,EAAc,OAAO;AAACb,IAAAA,IAAI,EAAE;AAAP,GAAP;AAEd,QAAMI,QAAQ,GAAG,MAAMC,KAAK,CAAE,+BAA8BO,GAAG,CAACE,KAAJ,CAAUR,QAAS,EAAnD,CAA5B;AACA,QAAMN,IAAI,GAAG,MAAMI,QAAQ,CAACI,IAAT,EAAnB;AACA,SAAO;AACHR,IAAAA;AADG,GAAP;AAGH,CARD,C,CAWI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import {useRouter} from 'next/router'\r\nimport Link from 'next/link'\r\n\r\nimport {MainLayout} from '../../layouts/MainLayout'\r\nimport { useState, useEffect } from 'react'\r\n\r\nexport default function Post({post: serverPost}) {\r\n    const router = useRouter()\r\n    // console.log('router: ', router);\r\n    const [post, setPost] = useState(serverPost)\r\n\r\n    useEffect(() => {\r\n        if (!serverPost) {\r\n            async () => {\r\n                const response = await fetch(`http://localhost:4200/posts/${post.template}`)\r\n                const data = await response.json()\r\n                setPost(data)\r\n            }\r\n        }\r\n    }, [])\r\n\r\n\r\n    if (!post) {\r\n        return <h1>Loading...</h1>\r\n    }\r\n    return (\r\n       <MainLayout>\r\n            <h1>{post.title} </h1>\r\n            <hr/>\r\n            <p>{post.body}</p>\r\n            <h5>Go back to <Link href=\"/posts\"> POSTS</Link></h5>\r\n       </MainLayout>\r\n    )\r\n}\r\n\r\nPost.getInitialProps = async (ctx) => {\r\n    if (!ctx.req) return {post: null}\r\n\r\n    const response = await fetch(`http://localhost:4200/posts/${ctx.query.template}`)\r\n    const post = await response.json()\r\n    return {\r\n        post\r\n    }\r\n}\r\n\r\n\r\n    // <h1><Link href={'/'}>Post router.query.template = </Link>{router.query.template}</h1>\r\n// router: ServerRouter {\r\n//     route: '/post/[template]',\r\n//     pathname: '/post/[template]',\r\n//     query: {},\r\n//     asPath: '/post/[template]',\r\n//     basePath: '',\r\n//     events: undefined,\r\n//     isFallback: false\r\n// }\r\n// ответ клиенту(WebDevTools) router: {\r\n//     pathname: \"/post/[template]\",\r\n//     route: \"/post/[template]\",\r\n//     query: {\r\n//         …},\r\n//     asPath: \"/post/id\",\r\n//     components: {\r\n//         …},\r\n//     …\r\n// }\r\n// asPath: \"/post/id\" // !!! из адресной строки, где отрисована страница...Зачем возвращать мне набранный адрес?\r\n// back: ƒ()\r\n// basePath: \"\"\r\n// beforePopState: ƒ()\r\n// components: {\r\n//         /post/ [template]: {\r\n//             …},\r\n//         /_app: {…}}\r\n//         events: {\r\n//             on: ƒ,\r\n//             off: ƒ,\r\n//             emit: ƒ\r\n//         }\r\n//         isFallback: false\r\n//         pathname: \"/post/[template]\"\r\n//         prefetch: ƒ()\r\n//         push: ƒ()\r\n//         query: {\r\n//             template: \"id\"\r\n//         } // ключ - название файла !\r\n//         reload: ƒ()\r\n//         replace: ƒ()\r\n//         route: \"/post/[template]\"\r\n//         __proto__: Object\r\n"]},"metadata":{},"sourceType":"module"}